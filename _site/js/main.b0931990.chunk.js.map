{"version":3,"sources":["../../scripts/formula.js","../../scripts/wasm.js","cmp/Cache.js","cmp/Network.js","cmp/Formula.js","cmp/Manifest.js","App.js","serviceWorker.js","../../scripts/server.js","../../scripts/network.js","../../scripts/cache.js","../../scripts/engine.js","KolmoApplication.js","cmp/RunButton.js","index.js","../../scripts/manifest.js"],"names":["_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","n","_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__","_manifest_js__WEBPACK_IMPORTED_MODULE_4__","_wasm_js__WEBPACK_IMPORTED_MODULE_5__","Formula","json","manifest","Object","this","wasm","jsglue","parameters","hasOwnProperty","Error","actor","ArgName","parameter","param","push","key","value","result","status","data","forEach","_eval2","a","mark","_callee","dependencies_data","args","arg","wasm_wrapper","mime","wrap","_context","prev","next","get","abrupt","t0","keys","t1","done","init","sent","exec","get_mime","MIME","stop","_x","apply","arguments","__webpack_exports__","Buffer","Wasm","raw_wasm","wasm_memory","_init","wasmModule","Module","_this","WebAssembly","compile","instantiate","exports","memory","stringFromUTF8Array","Function","Promise","resolve","reject","wasmBinary","onRuntimeInitialized","wasmMemory","create_error","_exec","_callee2","init_res","arg_index","arg_name_buffer","size","pointer","pWasmData","i","argSize","argPointer","pWasmArgData","j","resSize","resPointer","result_data","pResultData","k","_context2","Uint8Array","from","length","_set_arg_name","Uint8ClampedArray","buffer","_get_arg_index","create_last_error","_set_arg","_get_result_size","_get_result","t2","text","error","_get_last_error","_get_last_error_size","extraByteMap","count","str","index","ch","extra","chx","String","fromCharCode","Cache","props","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","cache","updateApp","handleCacheOper","bind","assertThisInitialized","event","target","name","toString","startCount","substr","_this2","cm","get_cached_manifests","cd","get_cached_data","cachedManifests","map","react_default","createElement","title","doi","strDigest","JSON","stringify","onClick","cachedData","className","border","width","get_cached_manifests_size","get_cached_data_size","Component","Network","network","fetchManifestResult","fetchDataResult","handleFetch","handleDOIChange","setState","fetchRes","defineProperty","then","res","id","type","onChange","list","application","formula","engine","evalResult","handleEval","eval","_this3","dependencies","get_dependencies","dep","cmp_Manifest","getDependencies","Manifest","init_manifest","rootManifest","handleFetchManifest","handleRemoveManifest","handleFetchData","handleRemoveData","updateManifest","setUpdateManifest","handleChangeManifestFocus","PopManifestFocusList","PushManifestFocusList","getCurrentManifest","search_manifest_by_doi","delete_manifest_by_doi","search_data_by_doi","updatedManifest","rawData","delete_data_by_doi","ManifestHeader","manifestDoi","get_doi","manifestInCache","get_manifest_by_doi","dataInCache","get_data_by_doi","manifestMime","manifestSize","get_size","ManifestControls","mC","dC","_this4","formulas","get_formulas","cmp_Formula","outStr","focus_button","ManifestFocusListIsEmpty","getManifestHeader","getManifestControls","getManifestFormulas","App","getCache","getNetwork","forceUpdate","cmp_Cache","cmp_Network","Boolean","window","location","hostname","match","server","Server","address","createClass","_get_manifest_by_doi","asyncToGenerator","regenerator_default","url","response","json_data","fetch","statusText","_get_data_by_doi","raw_data","arrayBuffer","_x2","settings","DedicatedServer","_search_manifest","dois","search_result","source","_search_manifest_by_doi","json_manifest","_manifest","scripts_manifest","set_manifest_by_doi","_search_data","_callee3","_context3","_x3","_search_data_by_doi","_callee4","server_data","_context4","set_data_by_doi","_x4","scripts_cache","manifests","Map","set","delete","clear","Engine","doi_data_formula","cached_data","dependency_manifest","manifest_data","eval_result","t3","get_data_by_manifest","KolmoApplication","dedicated_server_address","options","update_manifest","current_manifest","current_manifest_status","manifest_focus_list","str_manifest","parse","pop","RunButton","textAreaID","actionClick","manifestText","document","getElementById","setNewManifest","process","ReactDOM","render","src_App_0","querySelectorAll","interactivePanel","querySelector","buttonElement","cmp_RunButton","navigator","serviceWorker","ready","registration","unregister","_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_home_mikhail_Documents_kolmonet_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","_formula_js__WEBPACK_IMPORTED_MODULE_2__","raw","json_formula"],"mappings":"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","file":"static/js/main.b0931990.chunk.js","sourcesContent":["import _regeneratorRuntime from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Manifest from './manifest.js';\nimport Wasm from './wasm.js';\n\nvar Formula =\n/*#__PURE__*/\nfunction () {\n  function Formula(json, manifest) {\n    _classCallCheck(this, Formula);\n\n    this.json = json;\n    this.manifest = manifest;\n    this.wasm = null;\n    this.jsglue = null;\n    this.parameters = []; // validate actor\n\n    if (!this.json.hasOwnProperty(\"actor\")) throw new Error(\"Not found required property actor\");\n    if (!this.json.actor.hasOwnProperty(\"wasm\")) throw new Error(\"Not found required property actor.wasm\");\n    this.wasm = new Manifest(this.json.actor.wasm);\n    this.wasm.ArgName = \"actor.wasm\";\n\n    if (this.json.actor.hasOwnProperty(\"jsglue\")) {\n      this.jsglue = new Manifest(this.json.actor.jsglue);\n      this.jsglue.ArgName = \"actor.jsglue\";\n    } // validate parameters\n\n\n    if (!this.json.hasOwnProperty(\"parameters\")) throw new Error(\"Not found required property parameters\");\n\n    for (var parameter in this.json.parameters) {\n      var param = new Manifest(this.json.parameters[parameter]);\n      param.ArgName = parameter;\n      this.parameters.push(param);\n    }\n\n    ;\n  }\n\n  _createClass(Formula, [{\n    key: \"get_dependencies\",\n    value: function get_dependencies() {\n      var result = {\n        status: \"ok\",\n        data: []\n      };\n      result.data.push(this.wasm);\n      if (this.jsglue) result.data.push(this.jsglue);\n      this.parameters.forEach(function (parameter) {\n        result.data.push(parameter);\n      });\n      return result;\n    }\n  }, {\n    key: \"eval\",\n    value: function () {\n      var _eval2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dependencies_data) {\n        var result, wasm, jsglue, args, parameter, ArgName, arg, wasm_wrapper, mime;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  data: []\n                };\n                wasm = dependencies_data.get(\"actor.wasm\");\n\n                if (!(null === wasm)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                result.status = \"Evaluation failed, has no actor.wasm data\";\n                return _context.abrupt(\"return\", result);\n\n              case 5:\n                jsglue = null;\n\n                if (!this.jsglue) {\n                  _context.next = 11;\n                  break;\n                }\n\n                jsglue = dependencies_data.get(\"actor.jsglue\");\n\n                if (!(null == jsglue)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                result.status = \"Evaluation failed, has no actor.jsglue data\";\n                return _context.abrupt(\"return\", result);\n\n              case 11:\n                args = [];\n                _context.t0 = _regeneratorRuntime.keys(this.parameters);\n\n              case 13:\n                if ((_context.t1 = _context.t0()).done) {\n                  _context.next = 24;\n                  break;\n                }\n\n                parameter = _context.t1.value;\n                ArgName = this.parameters[parameter].ArgName;\n                arg = dependencies_data.get(ArgName);\n\n                if (!(null == arg)) {\n                  _context.next = 20;\n                  break;\n                }\n\n                result.status = \"Evaluation failed, has no \" + ArgName + \" data\";\n                return _context.abrupt(\"return\", result);\n\n              case 20:\n                arg.ArgName = ArgName;\n                args.push(arg);\n                _context.next = 13;\n                break;\n\n              case 24:\n                wasm_wrapper = new Wasm(wasm, jsglue);\n                _context.next = 27;\n                return wasm_wrapper.init();\n\n              case 27:\n                result = _context.sent;\n\n                if (!(\"ok\" === result.status)) {\n                  _context.next = 33;\n                  break;\n                }\n\n                _context.next = 31;\n                return wasm_wrapper.exec(args);\n\n              case 31:\n                result = _context.sent;\n\n                if (\"ok\" === result.status) {\n                  if (this.manifest) {\n                    mime = this.manifest.get_mime();\n                    if (\"ok\" === mime.status) result.data.MIME = mime.data;\n                  }\n                }\n\n              case 33:\n                return _context.abrupt(\"return\", result);\n\n              case 34:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _eval(_x) {\n        return _eval2.apply(this, arguments);\n      }\n\n      return _eval;\n    }()\n  }]);\n\n  return Formula;\n}();\n\nexport default Formula;","import _regeneratorRuntime from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nvar Wasm =\n/*#__PURE__*/\nfunction () {\n  function Wasm(raw_wasm, jsglue) {\n    _classCallCheck(this, Wasm);\n\n    this.raw_wasm = raw_wasm;\n    this.jsglue = jsglue;\n    this.wasm = null;\n    this.wasm_memory = null;\n  }\n\n  _createClass(Wasm, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        var result, wasmModule, wasm, jsglue, Module;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                result = {\n                  status: \"ok\"\n                };\n                _context.prev = 1;\n\n                if (!(null === this.wasm)) {\n                  _context.next = 19;\n                  break;\n                }\n\n                if (!(null === this.jsglue)) {\n                  _context.next = 14;\n                  break;\n                }\n\n                _context.next = 6;\n                return new WebAssembly.compile(this.raw_wasm);\n\n              case 6:\n                wasmModule = _context.sent;\n                _context.next = 9;\n                return new WebAssembly.instantiate(wasmModule, []);\n\n              case 9:\n                wasm = _context.sent;\n                this.wasm = wasm.exports;\n                this.wasm_memory = this.wasm.memory;\n                _context.next = 19;\n                break;\n\n              case 14:\n                jsglue = this.stringFromUTF8Array(this.jsglue);\n                Module = Function('\"use strict\";' + jsglue + 'return Module;')();\n                _context.next = 18;\n                return new Promise(function (resolve, reject) {\n                  function onRuntimeInitialized() {\n                    resolve(\"onRuntimeInitialized\");\n                  }\n\n                  _this.wasm = new Module({\n                    wasmBinary: _this.raw_wasm,\n                    onRuntimeInitialized: onRuntimeInitialized\n                  });\n                });\n\n              case 18:\n                this.wasm_memory = this.wasm.wasmMemory;\n\n              case 19:\n                _context.next = 24;\n                break;\n\n              case 21:\n                _context.prev = 21;\n                _context.t0 = _context[\"catch\"](1);\n                result.status = this.create_error(\"Exception while init: \" + _context.t0);\n\n              case 24:\n                return _context.abrupt(\"return\", result);\n\n              case 25:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 21]]);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"exec\",\n    value: function () {\n      var _exec = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(args) {\n        var result, init_res, arg, arg_index, arg_name_buffer, size, pointer, pWasmData, i, argSize, argPointer, pWasmArgData, j, resSize, resPointer, result_data, pResultData, k;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  data: []\n                };\n                _context2.prev = 1;\n                _context2.next = 4;\n                return this.init();\n\n              case 4:\n                init_res = _context2.sent;\n\n                if (!(\"ok\" === init_res.status)) {\n                  _context2.next = 44;\n                  break;\n                }\n\n                _context2.t0 = _regeneratorRuntime.keys(args);\n\n              case 7:\n                if ((_context2.t1 = _context2.t0()).done) {\n                  _context2.next = 41;\n                  break;\n                }\n\n                arg = _context2.t1.value;\n\n                if (!(null == args[arg])) {\n                  _context2.next = 12;\n                  break;\n                }\n\n                result.status = this.create_error(\"Wrong usage, one of arguments is empty\");\n                return _context2.abrupt(\"return\", result);\n\n              case 12:\n                // lets findout argument index by name\n                arg_index = 0;\n\n                if (args[arg].hasOwnProperty(\"ArgName\")) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                result.status = this.create_error(\"Wrong usage, one of arguments has no 'ArgName' property\");\n                return _context2.abrupt(\"return\", result);\n\n              case 16:\n                arg_name_buffer = new Uint8Array(Buffer.from(args[arg][\"ArgName\"]));\n                size = arg_name_buffer.length;\n                pointer = this.wasm._set_arg_name(arg, arg_name_buffer.length);\n\n                if (!(0 !== pointer)) {\n                  _context2.next = 28;\n                  break;\n                }\n\n                pWasmData = new Uint8ClampedArray(this.wasm_memory.buffer, pointer, size);\n\n                for (i = 0; i < pWasmData.length; i++) {\n                  pWasmData[i] = arg_name_buffer[i];\n                }\n\n                arg_index = this.wasm._get_arg_index(arg);\n\n                if (!(0 === arg_index)) {\n                  _context2.next = 26;\n                  break;\n                }\n\n                result.status = this.create_last_error();\n                return _context2.abrupt(\"return\", result);\n\n              case 26:\n                _context2.next = 30;\n                break;\n\n              case 28:\n                result.status = this.create_last_error();\n                return _context2.abrupt(\"return\", result);\n\n              case 30:\n                // set arg data to Wasm\n                argSize = args[arg].length;\n                argPointer = this.wasm._set_arg(arg_index, argSize);\n\n                if (!(0 !== argPointer)) {\n                  _context2.next = 37;\n                  break;\n                }\n\n                pWasmArgData = new Uint8ClampedArray(this.wasm_memory.buffer, argPointer, argSize);\n\n                for (j = 0; j < pWasmArgData.length; j++) {\n                  pWasmArgData[j] = args[arg][j];\n                }\n\n                _context2.next = 39;\n                break;\n\n              case 37:\n                result.status = this.create_last_error();\n                return _context2.abrupt(\"return\", result);\n\n              case 39:\n                _context2.next = 7;\n                break;\n\n              case 41:\n                // exec alg in wasm\n                if (this.wasm._exec()) {\n                  // get result\n                  resSize = this.wasm._get_result_size();\n                  resPointer = this.wasm._get_result();\n\n                  if (0 !== resPointer) {\n                    result_data = [];\n                    pResultData = new Uint8ClampedArray(this.wasm_memory.buffer, resPointer, resSize);\n\n                    for (k = 0; k < pResultData.length; k++) {\n                      result_data.push(pResultData[k]);\n                    } // TODO:\n                    // result[\"MIME\"] = this.wasm._get_result_type();\n\n\n                    result.status = \"ok\";\n                    result.data = result_data;\n                  } else result.status = this.create_last_error();\n                } else result.status = this.create_last_error();\n\n                _context2.next = 45;\n                break;\n\n              case 44:\n                result.status = this.create_error(\"Init error: \" + init_res.status);\n\n              case 45:\n                _context2.next = 50;\n                break;\n\n              case 47:\n                _context2.prev = 47;\n                _context2.t2 = _context2[\"catch\"](1);\n                result.status = this.create_error(\"Exception while exec: \" + _context2.t2);\n\n              case 50:\n                return _context2.abrupt(\"return\", result);\n\n              case 51:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[1, 47]]);\n      }));\n\n      function exec(_x) {\n        return _exec.apply(this, arguments);\n      }\n\n      return exec;\n    }()\n  }, {\n    key: \"create_error\",\n    value: function create_error(text) {\n      return text;\n    }\n  }, {\n    key: \"create_last_error\",\n    value: function create_last_error() {\n      var error = [];\n\n      var pointer = this.wasm._get_last_error();\n\n      var size = this.wasm._get_last_error_size();\n\n      var pWasmData = new Uint8ClampedArray(this.wasm_memory.buffer, pointer, size);\n\n      for (var i = 0; i < pWasmData.length; i++) {\n        error.push(pWasmData[i]);\n      }\n\n      return this.create_error(this.stringFromUTF8Array(error));\n    }\n  }, {\n    key: \"stringFromUTF8Array\",\n    value: function stringFromUTF8Array(data) {\n      var extraByteMap = [1, 1, 1, 1, 2, 2, 3, 0];\n      var count = data.length;\n      var str = \"\";\n\n      for (var index = 0; index < count;) {\n        var ch = data[index++];\n\n        if (ch & 0x80) {\n          var extra = extraByteMap[ch >> 3 & 0x07];\n          if (!(ch & 0x40) || !extra || index + extra > count) return null;\n          ch = ch & 0x3F >> extra;\n\n          for (; extra > 0; extra -= 1) {\n            var chx = data[index++];\n            if ((chx & 0xC0) !== 0x80) return null;\n            ch = ch << 6 | chx & 0x3F;\n          }\n        }\n\n        str += String.fromCharCode(ch);\n      }\n\n      return str;\n    }\n  }]);\n\n  return Wasm;\n}();\n\nexport default Wasm;","import React, { Component } from 'react';\n\nconst startCount = 10\nconst finishCount = 10\n\nclass Cache extends Component {\n\n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            cache: props.cache,\n            updateApp: props.updateApp,\n        }\n\n        this.handleCacheOper = this.handleCacheOper.bind(this)\n    }\n\n    \n    handleCacheOper(event)\n    {\n        if (this.state.cache[event.target.name](event.target.value))\n            this.state.updateApp()\n    }\n\n    strDigest(data)\n    {\n        let str = data\n        \n        if (typeof data !== 'string')\n            str = new Uint8Array(data).toString()\n        \n        if ( str.length > (startCount + finishCount) )\n            return str.substr(0, startCount) + \"...\" + str.substr((str.length - finishCount), finishCount)\n        else\n            return str\n    }\n\n\n    render()\n    {\n        let cache = this.state.cache\n\n        let cm = cache.get_cached_manifests()\n        let cd = cache.get_cached_data()\n        \n        let cachedManifests = cm.map(value => <tr><td title={value.doi}>{this.strDigest(value.doi)}</td><td title={JSON.stringify(value.value)}>{this.strDigest(JSON.stringify(value.value))}</td><td><button onClick={this.handleCacheOper} name=\"delete_manifest_by_doi\" value={value.doi}>X</button></td></tr>)\n        let cachedData = cd.map(value => <tr><td title={value.doi}>{this.strDigest(value.doi)}</td><td title={value.value}>{this.strDigest(value.value)} ({value.value.length})</td><td><button onClick={this.handleCacheOper} name=\"delete_data_by_doi\" value={value.doi}>X</button></td></tr>)\n\n        return (\n            <div className=\"Cache\">\n                <table border=\"1\" width=\"100%\">\n                    <th>Cache <button onClick={this.handleCacheOper} name=\"clear\" value=\"()\">Clear</button></th>\n                    <tr>\n                        <table border=\"1\" width=\"100%\">\n                            <th>Entity type</th><th>Count</th>\n                            <tr><td>Manifest</td><td>{cache.get_cached_manifests_size()}</td></tr>\n                            <tr><td>Data</td><td>{cache.get_cached_data_size()}</td></tr>\n                        </table>\n                    \n                        <table border=\"1\" width=\"100%\">\n                            <tr><th>DOI</th><th>Manifest</th><th>Delete</th></tr>\n                            {cachedManifests}\n                        </table>\n                        \n                        <table border=\"1\" width=\"100%\">\n                            <tr><th>DOI</th><th>Data</th><th>Delete</th></tr>\n                            {cachedData}\n                        </table>\n                    </tr>\n                </table>\n            </div>\n        );\n    }\n}\n\nexport default Cache;","import React, { Component } from 'react';\n\n\nclass Network extends Component {\n\n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            network: props.network,\n            updateApp: props.updateApp,\n            fetchManifestResult: \"\",\n            fetchDataResult: \"\",\n            doi: \"\",\n        }\n\n        this.handleFetch = this.handleFetch.bind(this)\n        this.handleDOIChange = this.handleDOIChange.bind(this)\n    }\n\n    handleDOIChange(event)\n    {\n        this.setState({\n            doi: event.target.value\n        })\n    }\n\n    async handleFetch(event)\n    {\n        let fetchRes = event.target.value\n\n        if (\"\" === this.state.doi)\n        {\n            this.setState({\n                [fetchRes]: \"Empty DOI\"\n            })\n\n            return\n        }\n\n        this.state.network[event.target.name](this.state.doi).then( res => {\n            \n            this.setState({\n                [fetchRes]: res.status\n            })\n\n            if (\"ok\" === res.status)\n                this.state.updateApp()\n        })\n    }\n\n    render()\n    {\n\n        return (\n            <div className=\"Network\">\n\n                <datalist id=\"dois\">\n                    <option value=\"03FEE1468FF693744FDEFB20D41E793E6A03CFBDD3687901EA99271DCC702DF8\"/>\n                    <option value=\"00A66067BD93F5417D9E94858795B6E852EF90DE790C543B1E47A2E009D435F3\"/>\n                    <option value=\"0487DEB729ABE42001007D1ADBEF310FE6BCBD308B7A889458F2E1F8B1C5D14E\"/>\n                </datalist>\n\n                <table border=\"1\" width=\"100%\">\n                    <th>Network</th>\n                    <tr>\n                        <table border=\"1\" width=\"100%\">\n                            <tr>                                \n                                <td>DOI <input type=\"text\" onChange={this.handleDOIChange} list=\"dois\"/></td>\n                                <td></td>\n                            </tr>    \n                            <tr>\n                                <td><button onClick={this.handleFetch} name=\"search_manifest_by_doi\" value=\"fetchManifestResult\">Fetch Manifest</button></td>\n                                <td>{this.state.fetchManifestResult}</td>\n                            </tr>\n                            <tr>\n                                <td><button onClick={this.handleFetch} name=\"search_data_by_doi\" value=\"fetchDataResult\">Fetch Data</button></td>\n                                <td>{this.state.fetchDataResult}</td>\n                            </tr>\n                        </table>\n                    </tr>    \n                </table>\n\n            </div>\n        );\n    }\n}\n\nexport default Network;","import React, { Component } from 'react';\nimport Manifest from './Manifest.js'\n\nclass Formula extends Component {\n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            application: props.application,\n            updateApp: props.updateApp,\n            formula: props.formula,\n            cache: props.application.engine.cache(),\n            network: props.application.engine.network(),\n            evalResult: \"No evaluation result\",\n        }\n\n        this.handleEval = this.handleEval.bind(this)\n    }\n\n    handleEval(event)\n    {\n        this.state.application.engine.eval(this.state.formula).then( result => {\n\n            this.setState({\n                evalResult: result.status\n            })\n            \n            this.state.updateApp()\n        });\n    }\n\n    getDependencies()\n    {\n        let FromulaDependency = \"\"\n\n        let dependencies = this.props.formula.get_dependencies()\n\n        if (0 === dependencies.data.length)\n        {\n            if (\"ok\" !== dependencies.status)\n                FromulaDependency = \"Error getting dependency: \" + dependencies.status\n            else\n                FromulaDependency = \"Has no dependency\"\n        }\n        else\n            FromulaDependency = dependencies.data.map(dep => <div><tr><td>{dep.ArgName}</td><td><Manifest application={this.state.application} updateApp={this.state.updateApp} manifest={{data:dep,status:\"ok\"}} /></td></tr></div>)\n        \n        return FromulaDependency\n    }\n\n    render()\n    {\n        return (\n            <div className=\"Formula\">\n                <tr><td><button onClick={this.handleEval}>Evaluate Formula</button></td><td>{this.state.evalResult}</td></tr>\n                {this.getDependencies()}\n            </div>\n        );\n    }\n}\n\nexport default Formula;","import React, { Component } from 'react';\nimport Formula from './Formula.js'\n\nclass Manifest extends Component {\n    \n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            application: props.application,\n            updateApp: props.updateApp,\n            cache: props.application.engine.cache(),\n            network: props.application.engine.network(),\n            manifest: props.manifest,\n            init_manifest: props.manifest,\n            rootManifest: props.rootManifest,\n        }\n\n        this.handleFetchManifest = this.handleFetchManifest.bind(this)\n        this.handleRemoveManifest = this.handleRemoveManifest.bind(this)\n        \n        this.handleFetchData = this.handleFetchData.bind(this)\n        this.handleRemoveData = this.handleRemoveData.bind(this)\n\n        if (this.state.rootManifest)\n        {\n            this.updateManifest = this.updateManifest.bind(this)\n            this.state.application.setUpdateManifest(this.updateManifest)\n        }\n\n        this.handleChangeManifestFocus = this.handleChangeManifestFocus.bind(this)\n    }\n\n    handleChangeManifestFocus()\n    {\n        if (this.state.rootManifest)\n            this.state.application.PopManifestFocusList()\n        else\n            this.state.application.PushManifestFocusList(this.state.manifest)\n    }\n\n    updateManifest()\n    {\n        this.setState({\n            manifest: this.state.application.getCurrentManifest(),\n            init_manifest: this.state.application.getCurrentManifest(),\n        });\n    }\n\n    handleFetchManifest(event)\n    {\n        this.state.network.search_manifest_by_doi(event.target.value).then( fetchRes => {\n        \n            if (\"ok\" === fetchRes.status)\n            {\n                this.setState({\n                    manifest: fetchRes\n                })\n                \n                this.state.updateApp()\n            }\n        })\n    }\n\n    handleRemoveManifest(event)\n    {\n        if (this.state.cache.delete_manifest_by_doi(event.target.value))\n        {\n            this.setState({\n                manifest: this.state.init_manifest\n            })\n\n            this.state.updateApp()\n        }\n    }\n\n    handleFetchData(event)\n    {\n        this.state.network.search_data_by_doi(event.target.value).then( fetchRes => {\n            \n            if (\"ok\" === fetchRes.status)\n            {\n                let updatedManifest = this.state.manifest\n                updatedManifest.rawData = fetchRes.data\n\n                this.setState({\n                    manifest: updatedManifest\n                })\n            }\n\n            this.state.updateApp()\n        })\n    }\n\n    handleRemoveData(event)\n    {\n        if (this.state.cache.delete_data_by_doi(event.target.value))\n        {\n            let updatedManifest = this.state.manifest\n            updatedManifest.rawData = null\n\n            this.setState({\n                manifest: updatedManifest\n            })\n\n            this.state.updateApp()\n        }\n    }\n\n    getManifestHeader()\n    {\n        let ManifestHeader = \"Has no DOI\"\n\n        let manifestDoi = this.state.manifest.data.get_doi()\n\n        if (\"ok\" === manifestDoi.status)\n        {\n            let doi = manifestDoi.data[0]\n\n            // this trick needs to update same manifests in other formulas !\n            {\n                let manifestInCache = this.state.cache.get_manifest_by_doi(doi)\n                if (\"ok\" === manifestInCache.status)\n                    this.state.manifest = manifestInCache\n                else\n                    this.state.manifest = this.state.init_manifest\n\n                let dataInCache = this.state.cache.get_data_by_doi(doi)\n                if (\"ok\" === dataInCache.status)\n                    this.state.manifest.rawData = dataInCache.data\n                else\n                    this.state.manifest.rawData = null\n            }\n\n            let manifestMime = (\"ok\" === this.state.manifest.data.get_mime().status) ? \"MIME='\" + this.state.manifest.data.get_mime().data + \"'\" : this.state.manifest.data.get_mime().status\n\n            let manifestSize = (\"ok\" === this.state.manifest.data.get_size().status) ? \"size=\" + this.state.manifest.data.get_size().data + \"\" : this.state.manifest.data.get_size().status\n\n            if (doi.length > 10)\n                ManifestHeader = doi.substr(0,10) + \"...\" + doi.substr((doi.length - 10), 10) + \" (\" + manifestMime + \", \" + manifestSize\n            else\n                ManifestHeader = doi + \" (\" + manifestMime + \", \" + manifestSize\n\n            if ( null != this.state.manifest.rawData )\n            {    \n                let rawData = new Uint8Array(this.state.manifest.rawData).toString()\n                ManifestHeader = ManifestHeader + \", Data=\" + rawData.substr(0,10) + \"...\" + rawData.substr((rawData.length - 10), 10)\n            }\n            else\n                ManifestHeader = ManifestHeader + \", Has no data\"\n\n            ManifestHeader = ManifestHeader + \")\"\n        }\n\n        return ManifestHeader\n    }\n\n    getManifestControls()\n    {\n        let ManifestControls = \"\"\n\n        let manifestDoi = this.state.manifest.data.get_doi()\n\n        if (\"ok\" === manifestDoi.status)\n        {\n            let doi = manifestDoi.data[0]\n\n            let manifestInCache = this.state.cache.get_manifest_by_doi(doi)\n\n            let mC = \"\"\n            if (\"ok\" === manifestInCache.status)\n                mC = <div><button onClick={this.handleRemoveManifest} value={doi}>Remove Manifest</button></div>\n            else\n                mC = <div><button onClick={this.handleFetchManifest} value={doi}>Fetch Manifest</button></div>\n\n            let dataInCache = this.state.cache.get_data_by_doi(doi)\n\n            let dC = \"\"\n            if (\"ok\" === dataInCache.status)\n                dC = <div><button onClick={this.handleRemoveData} value={doi}>Remove Data</button></div>\n            else\n                dC = <div><button onClick={this.handleFetchData} value={doi}>Fetch Data</button></div>\n\n            ManifestControls = <div><tr><td>{mC}</td><td>{dC}</td></tr></div>\n        }\n\n        return ManifestControls\n    }\n\n    getManifestFormulas()\n    {\n        let ManifestFromulas = \"\"\n\n        let formulas = this.state.manifest.data.get_formulas()\n\n        if (0 === formulas.data.length)\n        {\n            if (\"ok\" !== formulas.status)\n                ManifestFromulas = \"Error getting formulas: \" + formulas.status\n            else\n                ManifestFromulas = \"Has no formulas\"\n        }\n        else\n            ManifestFromulas = formulas.data.map(formula => <div><table border=\"1\" width=\"100%\"><Formula application={this.state.application} updateApp={this.state.updateApp} formula={formula}/></table></div>)\n\n        return ManifestFromulas\n    }\n\n    render()\n    {\n        if ((null == this.state.manifest) || (\"ok\" !== this.state.manifest.status))\n        {\n            let outStr = (null != this.state.manifest) ? this.state.manifest.status : \"Not defined\"\n\n            return (\n                <div className=\"Manifest\">\n                    <table border=\"1\" width=\"100%\">\n                        <th>Manifest</th>\n                        <tr>{outStr}</tr>\n                    </table>\n                </div>\n            )\n        }\n\n        let focus_button = <button onClick={this.handleChangeManifestFocus}>focus in</button>\n\n        if (this.state.rootManifest)\n        {\n            if (false === this.state.application.ManifestFocusListIsEmpty())\n                focus_button = <button onClick={this.handleChangeManifestFocus}>focus out</button>\n            else\n                focus_button = \"\"\n        }\n\n        return (\n            <div className=\"Manifest\">\n                <table border=\"1\" width=\"100%\">\n                    <th>Manifest -> {this.getManifestHeader()} {focus_button}</th>\n                    <tr>\n                        {this.getManifestControls()}\n                    </tr>\n                    <tr>\n                        {this.getManifestFormulas()}\n                    </tr>\n                </table>\n            </div>\n        );\n    }\n}\n\nexport default Manifest;","import React, { Component } from 'react';\nimport './App.css';\nimport Cache from './cmp/Cache.js'\nimport Network from './cmp/Network.js'\nimport Manifest from './cmp/Manifest.js'\n\nclass App extends Component {\n \n  constructor(props) \n  {\n    super(props)\n\n    this.state = {\n      application:  props.application,\n      cache:        props.application.getCache(),\n      network:      props.application.getNetwork()\n    }\n\n    this.updateApp = this.updateApp.bind(this)\n  }\n\n  updateApp()\n  {\n    this.forceUpdate()\n  }\n\n  render()\n  {\n    return (\n      <div className=\"App\">\n        <Manifest application={this.state.application} updateApp={this.updateApp} manifest={this.state.application.getCurrentManifest()} rootManifest={true}/>\n        -\n        <Cache cache={this.state.cache} updateApp={this.updateApp}/>\n        -\n        <Network network={this.state.network} updateApp={this.updateApp}/>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import _regeneratorRuntime from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nvar Server =\n/*#__PURE__*/\nfunction () {\n  function Server(address) {\n    _classCallCheck(this, Server);\n\n    this.address = address;\n  }\n\n  _createClass(Server, [{\n    key: \"get_manifest_by_doi\",\n    value: function () {\n      var _get_manifest_by_doi = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(doi) {\n        var result, url, response, json_data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  data: null\n                };\n                url = this.address + '/search?doi=' + doi;\n                _context.prev = 2;\n                _context.next = 5;\n                return fetch(url);\n\n              case 5:\n                response = _context.sent;\n                _context.prev = 6;\n\n                if (!(200 === response.status)) {\n                  _context.next = 15;\n                  break;\n                }\n\n                _context.next = 10;\n                return response.json();\n\n              case 10:\n                json_data = _context.sent;\n                result.data = json_data;\n                result.status = \"ok\";\n                _context.next = 16;\n                break;\n\n              case 15:\n                result.status = \"Response error: \" + response.statusText;\n\n              case 16:\n                _context.next = 21;\n                break;\n\n              case 18:\n                _context.prev = 18;\n                _context.t0 = _context[\"catch\"](6);\n                result.status = \"Error parsing request (\" + _context.t0 + \")\";\n\n              case 21:\n                _context.next = 26;\n                break;\n\n              case 23:\n                _context.prev = 23;\n                _context.t1 = _context[\"catch\"](2);\n                result.status = \"Error requesting server (\" + _context.t1 + \")\";\n\n              case 26:\n                return _context.abrupt(\"return\", result);\n\n              case 27:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 23], [6, 18]]);\n      }));\n\n      function get_manifest_by_doi(_x) {\n        return _get_manifest_by_doi.apply(this, arguments);\n      }\n\n      return get_manifest_by_doi;\n    }()\n  }, {\n    key: \"get_data_by_doi\",\n    value: function () {\n      var _get_data_by_doi = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(doi) {\n        var result, url, response, raw_data;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  data: null\n                };\n                url = this.address + '/raw/' + doi;\n                _context2.prev = 2;\n                _context2.next = 5;\n                return fetch(url);\n\n              case 5:\n                response = _context2.sent;\n\n                if (!(200 === response.status)) {\n                  _context2.next = 14;\n                  break;\n                }\n\n                _context2.next = 9;\n                return response.arrayBuffer();\n\n              case 9:\n                raw_data = _context2.sent;\n                result.data = raw_data;\n                result.status = \"ok\";\n                _context2.next = 15;\n                break;\n\n              case 14:\n                result.status = \"Response error: \" + response.statusText;\n\n              case 15:\n                _context2.next = 20;\n                break;\n\n              case 17:\n                _context2.prev = 17;\n                _context2.t0 = _context2[\"catch\"](2);\n                result.status = \"Error requesting server (\" + _context2.t0 + \")\";\n\n              case 20:\n                return _context2.abrupt(\"return\", result);\n\n              case 21:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[2, 17]]);\n      }));\n\n      function get_data_by_doi(_x2) {\n        return _get_data_by_doi.apply(this, arguments);\n      }\n\n      return get_data_by_doi;\n    }()\n  }]);\n\n  return Server;\n}();\n\nexport default Server;","import _regeneratorRuntime from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Server from './server.js';\nimport Manifest from './manifest.js';\n\nvar Network =\n/*#__PURE__*/\nfunction () {\n  function Network(settings, cache) {\n    _classCallCheck(this, Network);\n\n    this.Cache = cache;\n\n    if (settings.hasOwnProperty(\"DedicatedServer\")) {\n      this.DedicatedServer = new Server(settings[\"DedicatedServer\"]);\n      return;\n    }\n\n    throw new Error(\"Bad network settings\");\n  }\n\n  _createClass(Network, [{\n    key: \"search_manifest\",\n    value: function () {\n      var _search_manifest = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(manifest) {\n        var result, dois, doi, search_result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                result = {\n                  status: \"Not found\",\n                  source: null,\n                  data: null\n                };\n                dois = manifest.get_doi();\n\n                if (!(0 === dois.data.length)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                result.status = \"Manifest has no doi\";\n                return _context.abrupt(\"return\", result);\n\n              case 5:\n                if (!this.DedicatedServer) {\n                  _context.next = 22;\n                  break;\n                }\n\n                _context.t0 = _regeneratorRuntime.keys(dois.data);\n\n              case 7:\n                if ((_context.t1 = _context.t0()).done) {\n                  _context.next = 22;\n                  break;\n                }\n\n                doi = _context.t1.value;\n                _context.next = 11;\n                return this.search_manifest_by_doi(dois.data[doi]);\n\n              case 11:\n                search_result = _context.sent;\n\n                if (!(\"ok\" === search_result.status)) {\n                  _context.next = 19;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = search_result.source;\n                result.data = search_result.data;\n                return _context.abrupt(\"return\", result);\n\n              case 19:\n                result.status = search_result.status;\n\n              case 20:\n                _context.next = 7;\n                break;\n\n              case 22:\n                return _context.abrupt(\"return\", result);\n\n              case 23:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function search_manifest(_x) {\n        return _search_manifest.apply(this, arguments);\n      }\n\n      return search_manifest;\n    }()\n  }, {\n    key: \"search_manifest_by_doi\",\n    value: function () {\n      var _search_manifest_by_doi = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(doi) {\n        var result, manifest, json_manifest, _manifest;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  source: null,\n                  data: null\n                };\n\n                if (!this.DedicatedServer) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                manifest = this.Cache.get_manifest_by_doi(doi);\n\n                if (!(\"ok\" === manifest.status)) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = \"Cache\";\n                result.data = manifest.data;\n                _context2.next = 13;\n                break;\n\n              case 9:\n                _context2.next = 11;\n                return this.DedicatedServer.get_manifest_by_doi(doi);\n\n              case 11:\n                json_manifest = _context2.sent;\n\n                if (\"ok\" === json_manifest.status) {\n                  try {\n                    _manifest = new Manifest(json_manifest.data);\n                    result.status = \"ok\";\n                    result.source = \"Network\";\n                    result.data = _manifest;\n                    this.Cache.set_manifest_by_doi(_manifest, doi);\n                  } catch (error) {\n                    result.status = \"Not valid manifest (\" + error + \")\";\n                  }\n                } else {\n                  result.status = json_manifest.status;\n                }\n\n              case 13:\n                _context2.next = 16;\n                break;\n\n              case 15:\n                result.status = \"Not implimented\";\n\n              case 16:\n                return _context2.abrupt(\"return\", result);\n\n              case 17:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function search_manifest_by_doi(_x2) {\n        return _search_manifest_by_doi.apply(this, arguments);\n      }\n\n      return search_manifest_by_doi;\n    }()\n  }, {\n    key: \"search_data\",\n    value: function () {\n      var _search_data = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(manifest) {\n        var result, dois, doi, search_result;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                result = {\n                  status: \"Not found\",\n                  source: null,\n                  data: null\n                };\n                dois = manifest.get_doi();\n\n                if (!(0 === dois.data.length)) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                result.status = \"Manifest has no doi\";\n                return _context3.abrupt(\"return\", result);\n\n              case 5:\n                if (!this.DedicatedServer) {\n                  _context3.next = 22;\n                  break;\n                }\n\n                _context3.t0 = _regeneratorRuntime.keys(dois.data);\n\n              case 7:\n                if ((_context3.t1 = _context3.t0()).done) {\n                  _context3.next = 22;\n                  break;\n                }\n\n                doi = _context3.t1.value;\n                _context3.next = 11;\n                return this.search_data_by_doi(dois.data[doi]);\n\n              case 11:\n                search_result = _context3.sent;\n\n                if (!(\"ok\" === search_result.status)) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = search_result.source;\n                result.data = search_result.data;\n                return _context3.abrupt(\"return\", result);\n\n              case 19:\n                result.status = search_result.status;\n\n              case 20:\n                _context3.next = 7;\n                break;\n\n              case 22:\n                return _context3.abrupt(\"return\", result);\n\n              case 23:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function search_data(_x3) {\n        return _search_data.apply(this, arguments);\n      }\n\n      return search_data;\n    }()\n  }, {\n    key: \"search_data_by_doi\",\n    value: function () {\n      var _search_data_by_doi = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(doi) {\n        var result, data, server_data;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  source: null,\n                  data: null\n                };\n\n                if (!this.DedicatedServer) {\n                  _context4.next = 22;\n                  break;\n                }\n\n                data = this.Cache.get_data_by_doi(doi);\n\n                if (!(\"ok\" === data.status)) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = \"Cache\";\n                result.data = data.data;\n                return _context4.abrupt(\"return\", result);\n\n              case 8:\n                _context4.next = 10;\n                return this.DedicatedServer.get_data_by_doi(doi);\n\n              case 10:\n                server_data = _context4.sent;\n\n                if (!(\"ok\" === server_data.status)) {\n                  _context4.next = 19;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = \"Network\";\n                result.data = server_data.data;\n                this.Cache.set_data_by_doi(server_data.data, doi);\n                return _context4.abrupt(\"return\", result);\n\n              case 19:\n                result.status = server_data.status;\n\n              case 20:\n                _context4.next = 23;\n                break;\n\n              case 22:\n                result.status = \"Not implimented\";\n\n              case 23:\n                return _context4.abrupt(\"return\", result);\n\n              case 24:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function search_data_by_doi(_x4) {\n        return _search_data_by_doi.apply(this, arguments);\n      }\n\n      return search_data_by_doi;\n    }()\n  }]);\n\n  return Network;\n}();\n\nexport default Network;","import _classCallCheck from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nvar Cache =\n/*#__PURE__*/\nfunction () {\n  function Cache() {\n    _classCallCheck(this, Cache);\n\n    this.manifests = new Map();\n    this.data = new Map();\n  }\n\n  _createClass(Cache, [{\n    key: \"get_manifest_by_doi\",\n    value: function get_manifest_by_doi(doi) {\n      var result = {\n        status: \"Not found\",\n        data: null\n      };\n      var manifest = this.manifests.get(doi);\n\n      if (manifest) {\n        result.status = \"ok\";\n        result.data = manifest;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"set_manifest_by_doi\",\n    value: function set_manifest_by_doi(manifest, doi) {\n      this.manifests.set(doi, manifest);\n    }\n  }, {\n    key: \"delete_manifest_by_doi\",\n    value: function delete_manifest_by_doi(doi) {\n      return this.manifests.delete(doi);\n    }\n  }, {\n    key: \"get_data_by_doi\",\n    value: function get_data_by_doi(doi) {\n      var result = {\n        status: \"Not found\",\n        data: null\n      };\n      var data = this.data.get(doi);\n\n      if (data) {\n        result.status = \"ok\";\n        result.data = data;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_data_by_manifest\",\n    value: function get_data_by_manifest(manifest) {\n      var result = {\n        status: \"Not found\",\n        data: null\n      };\n      var dois = manifest.get_doi();\n\n      if (\"ok\" === dois.status) {\n        for (var doi in dois.data) {\n          var data = this.data.get(dois.data[doi]);\n\n          if (data) {\n            result.status = \"ok\";\n            result.data = data;\n            return result;\n          }\n        }\n      } else result.status = \"Manifest has no doi\";\n\n      return result;\n    }\n  }, {\n    key: \"set_data_by_doi\",\n    value: function set_data_by_doi(data, doi) {\n      this.data.set(doi, new Uint8Array(data));\n    }\n  }, {\n    key: \"delete_data_by_doi\",\n    value: function delete_data_by_doi(doi) {\n      return this.data.delete(doi);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var size = this.manifests.size + this.data.size;\n      this.manifests.clear();\n      this.data.clear();\n      return 0 !== size ? true : false;\n    }\n  }, {\n    key: \"get_cached_manifests\",\n    value: function get_cached_manifests() {\n      var result = [];\n      this.manifests.forEach(function (value, key) {\n        result.push({\n          doi: key,\n          value: value\n        });\n      });\n      return result;\n    }\n  }, {\n    key: \"get_cached_manifests_size\",\n    value: function get_cached_manifests_size() {\n      return this.manifests.size;\n    }\n  }, {\n    key: \"get_cached_data\",\n    value: function get_cached_data() {\n      var result = [];\n      this.data.forEach(function (value, key) {\n        result.push({\n          doi: key,\n          value: value\n        });\n      });\n      return result;\n    }\n  }, {\n    key: \"get_cached_data_size\",\n    value: function get_cached_data_size() {\n      return this.data.size;\n    }\n  }]);\n\n  return Cache;\n}();\n\nexport default Cache;","import _regeneratorRuntime from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Network from './network.js';\nimport Cache from './cache.js';\n\nvar Engine =\n/*#__PURE__*/\nfunction () {\n  function Engine(settings) {\n    _classCallCheck(this, Engine);\n\n    this.Cache = new Cache();\n\n    if (settings.hasOwnProperty(\"Network\")) {\n      this.Network = new Network(settings[\"Network\"], this.Cache);\n      return;\n    }\n\n    throw new Error(\"Bad engine settings\");\n  }\n\n  _createClass(Engine, [{\n    key: \"network\",\n    value: function network() {\n      return this.Network;\n    }\n  }, {\n    key: \"cache\",\n    value: function cache() {\n      return this.Cache;\n    }\n  }, {\n    key: \"eval\",\n    value: function () {\n      var _eval2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(formula) {\n        var result, doi_data_formula, dois, doi, cached_data, dependencies_data, dependencies, dependency_manifest, manifest, manifest_data, eval_result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                result = {\n                  status: \"\",\n                  source: null,\n                  data: []\n                };\n                doi_data_formula = null;\n\n                if (!formula.manifest) {\n                  _context.next = 17;\n                  break;\n                }\n\n                dois = formula.manifest.get_doi();\n\n                if (!(\"ok\" === dois.status)) {\n                  _context.next = 17;\n                  break;\n                }\n\n                _context.t0 = _regeneratorRuntime.keys(dois.data);\n\n              case 6:\n                if ((_context.t1 = _context.t0()).done) {\n                  _context.next = 17;\n                  break;\n                }\n\n                doi = _context.t1.value;\n                doi_data_formula = dois.data[doi];\n                cached_data = this.Cache.get_data_by_doi(doi_data_formula);\n\n                if (!(\"ok\" === cached_data.status)) {\n                  _context.next = 15;\n                  break;\n                }\n\n                result.status = \"ok\";\n                result.source = \"Cache\";\n                result.data = cached_data.data;\n                return _context.abrupt(\"return\", result);\n\n              case 15:\n                _context.next = 6;\n                break;\n\n              case 17:\n                dependencies_data = new Map();\n                dependencies = formula.get_dependencies();\n\n                if (!(\"ok\" === dependencies.status)) {\n                  _context.next = 37;\n                  break;\n                }\n\n                _context.t2 = _regeneratorRuntime.keys(dependencies.data);\n\n              case 21:\n                if ((_context.t3 = _context.t2()).done) {\n                  _context.next = 35;\n                  break;\n                }\n\n                dependency_manifest = _context.t3.value;\n                manifest = dependencies.data[dependency_manifest];\n                _context.next = 26;\n                return this.Cache.get_data_by_manifest(manifest);\n\n              case 26:\n                manifest_data = _context.sent;\n\n                if (!(\"ok\" === manifest_data.status)) {\n                  _context.next = 31;\n                  break;\n                }\n\n                dependencies_data.set(manifest.ArgName, manifest_data.data);\n                _context.next = 33;\n                break;\n\n              case 31:\n                result.status = \"Cache has no data for dependency: \" + manifest.ArgName;\n                return _context.abrupt(\"return\", result);\n\n              case 33:\n                _context.next = 21;\n                break;\n\n              case 35:\n                _context.next = 39;\n                break;\n\n              case 37:\n                result.status = \"Formula has no dependencies\";\n                return _context.abrupt(\"return\", result);\n\n              case 39:\n                _context.next = 41;\n                return formula.eval(dependencies_data);\n\n              case 41:\n                eval_result = _context.sent;\n\n                if (\"ok\" === eval_result.status) {\n                  //TODO: let check_result = formula.manifest.check_data(eval_result.data);\n                  result.status = \"ok\";\n                  result.source = \"Evaluation\";\n                  result.data = eval_result.data;\n                  if (doi_data_formula) this.Cache.set_data_by_doi(eval_result.data, doi_data_formula);\n                } else result.status = \"Error evaluation formula (\" + eval_result.status + \")\";\n\n                return _context.abrupt(\"return\", result);\n\n              case 44:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _eval(_x) {\n        return _eval2.apply(this, arguments);\n      }\n\n      return _eval;\n    }()\n  }]);\n\n  return Engine;\n}();\n\nexport default Engine;","import Engine from '../../scripts/engine.js'\nimport Manifest from '../../scripts/manifest.js'\n\nclass KolmoApplication\n{\n    constructor(dedicated_server_address)\n    {\n        let options = {\n            Network: {\n                DedicatedServer: dedicated_server_address\n            }\n        };\n\n        this.engine = new Engine(options)\n\n        this.update_manifest = null;\n\n        this.current_manifest = null;\n        this.current_manifest_status = \"Not defined\";\n\n        this.manifest_focus_list = []\n    }\n\n    setUpdateManifest(update_manifest){\n        this.update_manifest = update_manifest\n    }\n\n    getCache() {\n        return this.engine.cache()\n    }\n\n    getNetwork() {\n        return this.engine.network()\n    }\n\n    getCurrentManifest()\n    {\n        let result = {\n            status: \"ok\",\n            data: null\n        };\n\n        result.data = this.current_manifest;\n        result.status = this.current_manifest_status;\n\n        return result\n    }\n\n    setNewManifest(str_manifest)\n    {\n        this.manifest_focus_list = []\n\n        this.current_manifest = null;\n        this.current_manifest_status = \"Not defined\";\n\n        try\n        {\n            this.current_manifest = new Manifest(JSON.parse(str_manifest));\n            this.current_manifest_status = \"ok\";\n        }\n        catch(error)\n        {\n            this.current_manifest_status = \"Error creating manifest: \" + error\n        }\n\n        if (null !== this.update_manifest)\n            this.update_manifest();\n    }\n\n    PushManifestFocusList(manifest)\n    {\n        if (0 === this.manifest_focus_list.length)\n            this.manifest_focus_list.push({ data:this.current_manifest, status:this.current_manifest_status })\n        \n        this.manifest_focus_list.push({ data:manifest.data, status:manifest.status })\n\n        this.current_manifest = manifest.data;\n        this.current_manifest_status = manifest.status;\n\n        if (null !== this.update_manifest)\n            this.update_manifest();\n    }\n\n    PopManifestFocusList()\n    {\n        let manifest = this.manifest_focus_list.pop()\n\n        if (null != manifest)\n        {\n            manifest = this.manifest_focus_list.pop()\n\n            if (null != manifest)\n            {\n                this.current_manifest = manifest.data;\n                this.current_manifest_status = manifest.status;\n\n                if (null !== this.update_manifest)\n                    this.update_manifest();\n            }\n        }\n    }\n\n    ManifestFocusListIsEmpty(){\n        return (0 === this.manifest_focus_list.length) ? true : false\n    }\n}\n\nexport default KolmoApplication;\n","import React, { Component } from 'react';\n\nclass RunButton extends Component {\n\n    constructor(props) \n    {\n        super(props)\n\n        this.state = {\n            application: props.application,\n            textAreaID: props.textAreaID,\n        }\n\n        this.actionClick = this.actionClick.bind(this)\n    }\n\n    actionClick(event){\n        let manifestText = document.getElementById(this.state.textAreaID).value\n        this.state.application.setNewManifest(manifestText)\n    }\n\n    render() {\n        return (\n            <button onClick={this.actionClick}>Manifest to App</button>\n        )\n    }\n}\n\nexport default RunButton;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport KolmoApplication from './KolmoApplication.js'\nimport RunButton from './cmp/RunButton.js'\n\nlet application = new KolmoApplication(process.env.REACT_APP_DEDICATED_SERVER_ADDRESS);\n\nReactDOM.render(<App application={application}/>, document.getElementById('root'));\n\nvar interactives = document.querySelectorAll(\"div.interactive-canvas\");\n\ninteractives.forEach(function(interactivePanel) {\n    let textAreaID = interactivePanel.querySelector(\"textarea.manifest-text\").id;\n    let buttonElement =  interactivePanel.querySelector(\"span.run-button-placeholder\");\n    ReactDOM.render(<RunButton application={application} textAreaID={textAreaID}/>, buttonElement);\n});\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import _classCallCheck from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mikhail/Documents/kolmonet/app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Formula from './formula.js';\n\nvar Manifest =\n/*#__PURE__*/\nfunction () {\n  function Manifest(json) {\n    _classCallCheck(this, Manifest);\n\n    this.json = json; // TODO: Implement validation RULES:\n    // 1. has no doi -> HAVE TO own raw value or at least one formula\n    // 2. has no MIME -> HAVE TO own doi or at least one formula\n  }\n\n  _createClass(Manifest, [{\n    key: \"get_mime\",\n    value: function get_mime() {\n      var result = {\n        status: \"Has no MIME\",\n        data: null\n      };\n\n      if (this.json.hasOwnProperty(\"MIME\")) {\n        result.status = \"ok\";\n        result.data = this.json.MIME;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_size\",\n    value: function get_size() {\n      var result = {\n        status: \"Has no size\",\n        data: null\n      };\n\n      if (this.json.hasOwnProperty(\"size\")) {\n        result.status = \"ok\";\n        result.data = this.json.size;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_raw_value\",\n    value: function get_raw_value() {\n      var result = {\n        status: \"Has no raw\",\n        data: []\n      };\n\n      if (this.json.hasOwnProperty(\"raw\")) {\n        result.status = \"ok\";\n        result.data = new Uint8Array(Buffer.from(this.json.raw));\n        if (this.json.hasOwnProperty(\"MIME\")) result.data[\"MIME\"] = this.json.MIME;\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_doi\",\n    value: function get_doi() {\n      var result = {\n        status: \"ok\",\n        data: []\n      };\n\n      if (this.json.hasOwnProperty(\"doi\")) {\n        for (var doi in this.json.doi) {\n          result.data.push(this.json.doi[doi]);\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"get_formulas\",\n    value: function get_formulas() {\n      var _this = this;\n\n      var result = {\n        status: \"\",\n        data: []\n      };\n\n      if (this.json.hasOwnProperty(\"formulas\")) {\n        this.json.formulas.forEach(function (json_formula) {\n          try {\n            result.data.push(new Formula(json_formula, _this));\n          } catch (error) {\n            result.status += \"Error creating formula (\" + error + \") \";\n          }\n        });\n      }\n\n      if (\"\" === result.status) result.status = \"ok\";\n      return result;\n    }\n  }]);\n\n  return Manifest;\n}();\n\nexport default Manifest;"],"sourceRoot":""}